

# Calculer le chiffre d'affaires total
def chiffre_affaires(donnees, produit=None, date=None):
    total = 0.0
    for ligne in donnees:
        prix = float(ligne[3])
        quantite = int(ligne[2])
        if (produit and ligne[1] == produit) or (date and ligne[4] == date) or (not produit and not date):
            total += prix * quantite
    return total

# Interface utilisateur adaptée à lire_csv()
def interface():
    donnees = lire_csv("ventes.csv")  # Utilisation de la fonction `lire_csv`
    while True:
        print("\nOptions :")
        print("1. Modifier une vente")
        print("2. Ajouter une nouvelle vente")
        print("3. Filtrer les ventes par produit")
        print("4. Calculer le chiffre d'affaires")
        print("5. Sauvegarder et quitter")

        choix = input("Votre choix : ")

        if choix == "1":
            modifier_vente(donnees)
        elif choix == "2":
            ajouter_vente(donnees)
        elif choix == "3":
            produit = input("Entrez le nom du produit : ")
            ventes_filtres = produit_filtre(donnees, produit)
            print("Ventes filtrées pour", produit, ":")
            for vente in ventes_filtres:
                print(vente)
        elif choix == "4":
            produit = input("Entrez un produit (laisser vide pour tout) : ")
            date = input("Entrez une date (laisser vide pour tout) : ")
            produit = produit if produit else None
            date = date if date else None
            print(f"Chiffre d'affaires total : {chiffre_affaires(donnees, produit, date)}")
        elif choix == "5":
            sauvegarder_donnees(donnees)
            print("Modifications enregistrées. Fin du programme.")
            break
        else:
            print("Choix invalide, veuillez réessayer.")

# Lancer l’interface utilisateur
interface()
